(this.webpackJsonpqys=this.webpackJsonpqys||[]).push([[0],{152:function(e,t,a){e.exports=a(197)},157:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(57),i=a.n(s),o=(a(157),a(114)),l=a(31),c=a(4),u=a(5),d=a(6),h=a(8),p=a(7),m=a(149),f=a.n(m),v=a(26);function y(e){return~~(e/4)}function b(){for(var e=36,t=Array.from(Array(e).keys());e;){var a=Math.floor(Math.random()*e--),n=[t[e],t[a]];t[a]=n[0],t[e]=n[1]}return t}function w(e,t){return 0===e.length?[[0,t]]:[].concat(Object(v.a)(e),[[e[e.length-1][0]+1,t]]).slice(-4)}var g=a(59),O=a(36),j=a(113),k=a.n(j),S=k.a.mark(E);function E(e){var t;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=0;case 1:if(!(t<e)){a.next=7;break}return a.next=4,t;case 4:t++,a.next=1;break;case 7:case"end":return a.stop()}}),S)}function C(e){var t,a=Object(O.a)(e.entries());try{for(a.s();!(t=a.n()).done;){var n=Object(g.a)(t.value,2),r=n[0];if(!(n[1]<2)){var s=Object(v.a)(e);if(s[r]-=2,B(s))return!0}}}catch(i){a.e(i)}finally{a.f()}return!1}function B(e){var t,a=Object(O.a)(E(7));try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e[n]<0)return!1;e[n]%=3;var r,s=e[n],i=Object(O.a)(E(3));try{for(i.s();!(r=i.n()).done;){e[n+r.value]-=s}}catch(c){i.e(c)}finally{i.f()}}}catch(c){a.e(c)}finally{a.f()}var o,l=Object(O.a)(e);try{for(l.s();!(o=l.n()).done;){if(o.value%3)return!1}}catch(c){l.e(c)}finally{l.f()}return!0}function D(e){var t,a=0,n=0,r=Object(O.a)(e);try{for(r.s();!(t=r.n()).done;){switch(t.value){case 0:continue;case 3:a+=1;continue;case 2:n+=1;continue;default:return!1}}}catch(s){r.e(s)}finally{r.f()}return a<=1&&n%3===1}var T={hand:[],p:0,pile:[],started:null};function G(e,t){var a=Object(v.a)(e.hand);return a.splice(t,1),Object(c.a)({},e,{hand:a})}function x(e){var t=Object(v.a)(e.hand);return t.push(e.pile[e.p]),Object(c.a)({},e,{hand:t,p:e.p+1})}function A(e){return Object(c.a)({},e,{hand:e.pile.slice(0,e.p)})}function M(e){console.log(e);var t=Object(v.a)(e.hand);t.sort((function(e,t){return e-t}));var a=Object(c.a)({},e,{hand:t});return console.log(a),a}function N(e,t,a){var n=b(),r=t();return A(Object(c.a)({},T,{p:a,pile:n,started:r}))}function L(e){switch(e){case"disallow":return C;case"allow":return function(e){return C(e)||D(e)};case"allow-hog":return function(e){return C(e)||D(e)||function(e){var t,a=0,n=0,r=Object(O.a)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(3!==s){if(s%2)return!1;n+=s/2}else a+=1}}catch(i){r.e(i)}finally{r.f()}return a<=1&&n%3===1}(e)}}}function F(e){switch(e.tileStyle){case"PostModern":switch(e.tileSuit){case"bamboos":return U;case"characters":return q;case"dots":return K}case"GLMahjongTile":switch(e.tileSuit){case"bamboos":return _;case"characters":return Y;case"dots":return $}}}function H(e){switch(e.tileStyle){case"PostModern":return 88;case"GLMahjongTile":return 91}}var P=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleWindowResize=function(){console.log("windowInnerWidth: ".concat(window.innerWidth)),n.setState({windowInnerWidth:window.innerWidth})},n.handleTimeRestChanged=function(){if(null!=n.props.started){var e=n.props.started.valueOf()+n.state.settings.timeOfGame-(new Date).valueOf();e<0&&(e=0),n.setState({timeRest:e}),e<=0&&(clearInterval(n.state.displayTime),n.handleOpenModal())}},n.handleHandLengthChanged=function(e){n.setState({settings:Object(c.a)({},n.state.settings,{handLength:parseInt(e.target.value)})})},n.handleTileStyleChanged=function(e){n.setState({theme:Object(c.a)({},n.state.theme,{tileStyle:e.target.value})})},n.handleTileSuitChanged=function(e){n.setState({theme:Object(c.a)({},n.state.theme,{tileSuit:e.target.value})})},n.handleAllowPairsChanged=function(e){n.setState({settings:Object(c.a)({},n.state.settings,{allowPairs:e.target.value})})},n.handleTimeBeforeDrawChanged=function(e){n.setState({settings:Object(c.a)({},n.state.settings,{timeBeforeDraw:parseInt(e.target.value)})})},n.handleTimeBeforeSortChanged=function(e){n.setState({settings:Object(c.a)({},n.state.settings,{timeBeforeSort:parseInt(e.target.value)})})},n.handleTimeOfGameChanged=function(e){n.setState({settings:Object(c.a)({},n.state.settings,{timeOfGame:parseInt(e.target.value)})})},n.handleOpenModal=function(){n.setState({openModal:!0})},n.handleCloseModal=function(){n.setState({openModal:!1})},n.declareHu=function(){return n.props.actions.declareHu({validator:L(n.state.settings.allowPairs),next:N(n.props.initializer,(function(){return new Date}),n.state.settings.handLength),timeBeforeDraw:n.state.settings.timeBeforeDraw,timeBeforeSort:n.state.settings.timeBeforeSort})},n.directDiscardAndDraw=function(){return n.discardAndDraw(n.props.deal.hand.length-1)},n.discardAndDraw=function(e){return n.props.actions.discardAndDraw({position:e,timeBeforeDraw:n.state.settings.timeBeforeDraw,timeBeforeSort:n.state.settings.timeBeforeSort})},n.resetGame=function(){return n.props.actions.resetGame({first:N(n.props.initializer,(function(){return new Date}),n.state.settings.handLength),timeBeforeDraw:n.state.settings.timeBeforeDraw,timeBeforeSort:n.state.settings.timeBeforeSort,timeOfGame:n.state.settings.timeOfGame})},n.handleKeydown=function(e){if(32===e.keyCode)return e.preventDefault(),n.declareHu();if(!(e.keyCode<48)){if(48===e.keyCode)return n.directDiscardAndDraw();if(83===e.keyCode)return n.resetGame();if(!(58<=e.keyCode)){console.log("keyCode: ".concat(e.keyCode));var t=e.keyCode-49;console.log("rank: ".concat(t));var a=n.props.deal.hand.findIndex((function(e,a){return console.log("".concat(a,": ").concat(e)),y(e)===t}));return console.log("position: ".concat(a)),0<=a?n.discardAndDraw(a):void 0}}},n.state={settings:{handLength:13,allowPairs:"allow",timeBeforeDraw:1e3,timeBeforeSort:500,timeOfGame:6e4},theme:{tileStyle:"PostModern",tileSuit:"dots"},timeRest:null,displayTime:null,windowInnerWidth:window.innerWidth,openModal:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown),this.setState({displayTime:setInterval(this.handleTimeRestChanged,10)}),window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown),clearInterval(this.state.displayTime),window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{theme:this.state.theme,hand:this.props.deal.hand,tileClass:F(this.state.theme),maxTiles:this.state.settings.handLength+1,discard:this.discardAndDraw,width:this.state.windowInnerWidth}),r.a.createElement(X,{score:this.props.score,time:this.state.timeRest,hu:this.declareHu,reset:this.resetGame,handLength:{handler:this.handleHandLengthChanged},tileStyle:{handler:this.handleTileStyleChanged},tileSuit:{handler:this.handleTileSuitChanged},allowPairs:{handler:this.handleAllowPairsChanged},timeBeforeDraw:{handler:this.handleTimeBeforeDrawChanged,value:this.state.settings.timeBeforeDraw},timeBeforeSort:{handler:this.handleTimeBeforeSortChanged,value:this.state.settings.timeBeforeSort},timeOfGame:{handler:this.handleTimeOfGameChanged,value:this.state.settings.timeOfGame}}),r.a.createElement(Q,{messages:this.props.messages}),r.a.createElement(re,{close:this.handleCloseModal,isOpen:this.state.openModal,score:~~(1e3*this.props.score),settings:(e=this.state.settings,"".concat(e.handLength).concat("disallow"===e.allowPairs?"":"allow"===e.allowPairs?"p":"pp"," ").concat(e.timeOfGame/1e3,"/").concat(e.timeBeforeDraw/1e3)+(e.timeBeforeSort<e.timeBeforeDraw?"(".concat(e.timeBeforeSort/1e3,")"):""))}));var e}}]),a}(r.a.Component),I=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderTile",value:function(e,t){var a=this;return r.a.createElement(this.props.tileClass,{key:t,rank:y(t),onClick:function(){return a.props.discard(e)}})}},{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement(W,{scale:this.props.width/(64*this.props.maxTiles),height:H(this.props.theme)},r.a.createElement(R,{width:64*this.props.maxTiles,scale:this.props.width/(64*this.props.maxTiles)},this.props.hand.map((function(t,a){return e.renderTile(a,t)}))))}}]),a}(r.a.Component),W=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"hand-container",style:{height:"".concat(this.props.scale*this.props.height,"px")}},this.props.children)}}]),a}(r.a.Component),R=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"hand",style:{width:"".concat(this.props.width,"px"),transformOrigin:"top left",transform:"scale(".concat(this.props.scale,")")}},this.props.children)}}]),a}(r.a.Component),z=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"tile ".concat(this.tileClass()),onClick:this.props.onClick},r.a.createElement("img",{src:this.imageUrl(),style:this.generateStyle(this.props.rank),alt:(this.props.rank+1).toString()}))}},{key:"tileClass",value:function(){throw new TypeError("tileClass() is not implemented")}},{key:"imageUrl",value:function(){throw new TypeError("imageUrl() is not implemented")}},{key:"generateStyle",value:function(e){throw new TypeError("")}}]),a}(r.a.Component),V=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"generateStyle",value:function(e){return{clip:"rect(".concat(this.top(e),", ").concat(this.right(e),", ").concat(this.bottom(e),", ").concat(this.left(e),")"),top:-this.top(e),left:-this.left(e)}}},{key:"tileClass",value:function(){return"pm"}},{key:"right",value:function(e){throw new TypeError("right() is not implemented")}},{key:"left",value:function(e){throw new TypeError("left() is not implemented")}},{key:"top",value:function(e){return 0}},{key:"bottom",value:function(e){return 88}},{key:"imageUrl",value:function(){return"postmodern.svg"}}]),a}(z),U=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"left",value:function(e){return 64*(24+e)}},{key:"right",value:function(e){return 64*(25+e)}}]),a}(V),q=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"left",value:function(e){return 64*(15+e)}},{key:"right",value:function(e){return 64*(16+e)}}]),a}(V),K=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"left",value:function(e){return 64*(0+e)}},{key:"right",value:function(e){return 64*(1+e)}}]),a}(V),J=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"suit",value:function(){throw new TypeError("suit() is not implemented")}},{key:"imageUrl",value:function(){return"gl-mahjongtile-svg/".concat(this.suit(),"-").concat(this.props.rank,".svg")}},{key:"tileClass",value:function(){return"gl"}},{key:"generateStyle",value:function(e){return{transform:"scale(1, -1)"}}}]),a}(z),_=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"suit",value:function(){return"b"}}]),a}(J),Y=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"suit",value:function(){return"c"}}]),a}(J),$=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"suit",value:function(){return"d"}}]),a}(J),Q=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("ul",{className:"status"},this.props.messages.map((function(e){return r.a.createElement("li",{key:e[0]},e[1])})))}}]),a}(r.a.Component),X=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderHuButton",value:function(){return r.a.createElement(ne,{onClick:this.props.hu})}},{key:"renderStatus",value:function(){return r.a.createElement("div",{className:"status-labels"},r.a.createElement("div",{className:"status-label"},null==this.props.score?"":"score: ".concat(~~(1e3*this.props.score))),r.a.createElement("div",{className:"status-label"},null==this.props.time?"":"time: ".concat((this.props.time/1e3).toFixed(2))))}},{key:"renderStartButton",value:function(){return r.a.createElement(ae,{onClick:this.props.reset})}},{key:"renderHandLength",value:function(){return r.a.createElement("fieldset",{className:"hand-length"},r.a.createElement("span",{className:"radio-label"},"#tiles"),r.a.createElement(Z,{choices:[1,4,7,10,13,16].map((function(e){return{display:se(e,2),value:e}})),name:"hand-length",defaultValue:13,onChange:this.props.handLength.handler}))}},{key:"renderTileStyle",value:function(){return r.a.createElement("fieldset",{className:"tile-style"},r.a.createElement("span",{className:"radio-label"},"tile style"),r.a.createElement(Z,{choices:[{display:"PostModern",value:"PostModern"},{display:"GL-MT",value:"GLMahjongTile"}],name:"tile-style",defaultValue:"PostModern",onChange:this.props.tileStyle.handler}))}},{key:"renderTileSuit",value:function(){return r.a.createElement("fieldset",{className:"tile-suit"},r.a.createElement("span",{className:"radio-label"},"suit"),r.a.createElement(Z,{choices:[{display:"bams/\u7d22/\u6761",value:"bamboos"},{display:"chars/\u842c/\u4e07",value:"characters"},{display:"dots/\u7b52/\u997c",value:"dots"}],name:"tile-suit",defaultValue:"dots",onChange:this.props.tileSuit.handler}))}},{key:"renderAllowPairs",value:function(){return r.a.createElement("fieldset",{className:"allow-pairs"},r.a.createElement("span",{className:"radio-label"},"pairs"),r.a.createElement(Z,{choices:[{display:"disallow",value:"disallow"},{display:"allow",value:"allow"},{display:"tile hog",value:"allow-hog"}],name:"allow-pairs",defaultValue:"allow",onChange:this.props.allowPairs.handler}))}},{key:"renderTimeBeforeDraw",value:function(){return r.a.createElement("fieldset",null,r.a.createElement(te,{id:"time-before-draw",label:"time before draw",handler:this.props.timeBeforeDraw.handler,value:{min:100,max:9900,step:100,default:1e3,display:(this.props.timeBeforeDraw.value/1e3).toFixed(1)+"s"}}))}},{key:"renderTimeBeforeSort",value:function(){return r.a.createElement("fieldset",null,r.a.createElement(te,{id:"time-before-sort",label:"time before sort",handler:this.props.timeBeforeSort.handler,value:{min:0,max:9900,step:100,default:500,display:(this.props.timeBeforeSort.value/1e3).toFixed(1)+"s"}}))}},{key:"renderTimeOfGame",value:function(){return r.a.createElement("fieldset",null,r.a.createElement(te,{id:"time-of-game",label:"time of game",handler:this.props.timeOfGame.handler,value:{min:3e4,max:6e5,step:1e3,default:6e4,display:r.a.createElement(r.a.Fragment,null,se(this.props.timeOfGame.value/1e3,3),"s")}}))}},{key:"render",value:function(){return r.a.createElement("form",{className:"controls"},this.renderHuButton(),this.renderStatus(),this.renderStartButton(),this.renderHandLength(),this.renderTileStyle(),this.renderTileSuit(),this.renderAllowPairs(),this.renderTimeBeforeDraw(),this.renderTimeBeforeSort(),this.renderTimeOfGame())}}]),a}(r.a.Component),Z=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.choices.map((function(t,a){return r.a.createElement(ee,{key:a,name:e.props.name,value:t.value,display:t.display,onChange:e.props.onChange,defaultValue:e.props.defaultValue})})))}}]),a}(r.a.Component),ee=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"radio",name:this.props.name,id:"".concat(this.props.name,"-").concat(this.props.value),value:this.props.value,onChange:this.props.onChange,defaultChecked:this.props.value===this.props.defaultValue}),r.a.createElement("label",{htmlFor:"".concat(this.props.name,"-").concat(this.props.value)},this.props.display))}}]),a}(r.a.Component),te=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.value,t=this.props.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},this.props.label),r.a.createElement("input",{type:"range",id:t,name:t,min:e.min,max:e.max,step:e.step,defaultValue:e.default,onChange:this.props.handler}),r.a.createElement("output",{htmlFor:t},e.display))}}]),a}(r.a.Component),ae=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"start-button",onClick:this.props.onClick},r.a.createElement("span",{className:"start-text"},"start"))}}]),a}(r.a.Component),ne=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"hu-button",onClick:this.props.onClick},r.a.createElement("span",{className:"hu-text"},"Hu"))}}]),a}(r.a.Component),re=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderText",value:function(){return encodeURIComponent("Score: ".concat(this.props.score," (settings: ").concat(this.props.settings,")"))}},{key:"render",value:function(){return r.a.createElement(f.a,{isOpen:this.props.isOpen,shouldCloseOnOverlayClick:!0,className:"result-content",overlayClassName:"result-overlay"},r.a.createElement("div",{className:"result-score"},"Your score: ",this.props.score),r.a.createElement("div",{className:"result-controls"},r.a.createElement("div",{className:"result-close",onClick:this.props.close},"Close"),r.a.createElement("a",{className:"result-tweet",href:"https://twitter.com/intent/tweet?text=".concat(this.renderText(),"&url=https%3A%2F%2Fmajiang.github.io%2Fmj%2Fqys%2F&hashtags=qysmj&related=__DaLong")},r.a.createElement("div",null,"Tweet"))))}}]),a}(r.a.Component);function se(e,t){var a=e.toString().length;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"transparent"},"0".repeat(t-a)),e)}var ie=a(204),oe=a(203),le=a(78);function ce(e,t){return Object(oe.a)(Object(c.a)({},t,{type:e.type,process:function(a,n,r){var s=a.action,i=a.getState;if(!Object(le.isType)(s,e))throw new TypeError;t.process({action:s,getState:i},n,r)},validate:void 0,transform:void 0}))}var ue=a(150),de=Object(le.actionCreatorFactory)(),he={deal:T,score:0,started:null,messages:[]},pe={appendMessage:de("appendMessage"),discard:de("discard"),draw:de("draw"),discardAndDraw:de("discardAndDraw"),declareHu:de("declareHu"),reset:de("reset"),resetAndDraw:de("resetAndDraw"),resetGame:de("resetGame"),newGame:de("newGame"),sort:de("sort"),sortAndDraw:de("sortAndDraw"),scoreHu:de("scoreHu"),scoreCuohu:de("scoreCuohu"),finish:de("finish")},me=Object(ue.reducerWithInitialState)(he).case(pe.discard,(function(e,t){return Object(c.a)({},e,{deal:G(e.deal,t.position)})})).case(pe.draw,(function(e,t){return Object(c.a)({},e,{deal:x(e.deal)})})).case(pe.reset,(function(e,t){return Object(c.a)({},e,{deal:A(t.deal)})})).case(pe.sort,(function(e,t){return Object(c.a)({},e,{deal:M(e.deal)})})).case(pe.newGame,(function(e,t){return Object(c.a)({},he,{started:t.started,messages:w([],"new game started at ".concat(t.started))})})).case(pe.appendMessage,(function(e,t){return Object(c.a)({},e,{messages:w(e.messages,t.message)})})).case(pe.scoreHu,(function(e,t){return Object(c.a)({},e,{score:e.score+Math.sqrt(t.tbd/(t.time.valueOf()-e.deal.started.valueOf()))})})).case(pe.scoreCuohu,(function(e,t){return Object(c.a)({},e,{score:e.score-1})})).case(pe.finish,(function(e,t){return console.log("finish at: ".concat(new Date)),console.log(e),console.log(t),Object(c.a)({},he,{score:e.score,messages:w([],"finish! score: ".concat(~~(1e3*e.score)))})}));function fe(e,t,a,n,r){n(e),setTimeout((function(){n(a),r()}),t)}var ve=ce(pe.discardAndDraw,{process:function(e,t,a){var n=e.action,r=n.payload.timeBeforeSort<=n.payload.timeBeforeDraw?[n.payload.timeBeforeSort,pe.sortAndDraw({timeBetweenSortDraw:n.payload.timeBeforeDraw-n.payload.timeBeforeSort})]:[n.payload.timeBeforeDraw,pe.draw({})],s=Object(g.a)(r,2),i=s[0],o=s[1];fe(pe.discard({position:n.payload.position}),i,o,t,a)}}),ye=ce(pe.resetAndDraw,{process:function(e,t,a){var n=e.action;console.log(n);var r=n.payload.timeBeforeSort<=n.payload.timeBeforeDraw?[n.payload.timeBeforeSort,pe.sortAndDraw({timeBetweenSortDraw:n.payload.timeBeforeDraw-n.payload.timeBeforeSort})]:[n.payload.timeBeforeDraw,pe.draw({})],s=Object(g.a)(r,2),i=s[0],o=s[1];fe(pe.reset({deal:n.payload.deal}),i,o,t,a)}}),be=ce(pe.sortAndDraw,{process:function(e,t,a){var n=e.action;fe(pe.sort({}),n.payload.timeBetweenSortDraw,pe.draw({}),t,a)}}),we=[ve,ye,ce(pe.resetGame,{latest:!0,warnTimeout:0,process:function(e,t,a){var n=e.action;console.log(n.payload),t(pe.newGame({started:n.payload.first.started})),fe(pe.resetAndDraw({deal:n.payload.first,timeBeforeDraw:n.payload.timeBeforeDraw,timeBeforeSort:n.payload.timeBeforeSort}),n.payload.timeOfGame,pe.finish({}),t,a),console.log("".concat(new Date))}}),be,ce(pe.declareHu,{process:function(e,t,a){var n=e.action,r=e.getState,s=n.payload.validator(function(e){var t=new Array(9).fill(0);return e.forEach((function(e){t[y(e)]+=1})),t}(r().deal.hand));!function(e,t,a){e.forEach((function(e){t(e)})),a()}([s?pe.scoreHu({time:n.payload.next.started,tbd:n.payload.timeBeforeDraw}):pe.scoreCuohu({}),pe.appendMessage({message:"declared ".concat(s," hu")}),pe.resetAndDraw({deal:n.payload.next,timeBeforeDraw:n.payload.timeBeforeDraw,timeBeforeSort:n.payload.timeBeforeSort})],t,a)}})],ge=Object(l.c)(me,Object(l.a)(Object(ie.a)(we))),Oe=(a(196),Object(o.b)((function(e){return e}),(function(e){return{actions:Object(l.b)(pe,e)}}))(P));var je=function(){return r.a.createElement(o.a,{store:ge},r.a.createElement(Oe,{initializer:b}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.dce52a1a.chunk.js.map