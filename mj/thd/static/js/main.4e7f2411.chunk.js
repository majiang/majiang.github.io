(this.webpackJsonptenhoudan=this.webpackJsonptenhoudan||[]).push([[0],{160:function(e,n,t){},161:function(e,n,t){},162:function(e,n){},163:function(e,n){},164:function(e,n){},176:function(e,n,t){"use strict";t.r(n);var i=t(2),r=t(0),a=t.n(r),c=t(14),u=t.n(c),s=(t(160),t(12)),j=t(21),o=t(177),l=(t(161),t(228)),d=t(233),b=t(227),f=t(226),O=t(225),x=t(230),h=t(231),p=t(232),v=t(229),m=t(20),y=t(143),g=t(45),w=function(e){return Array.from({length:e},(function(e,n){return n}))};var T=function(e){return e.reduce((function(e,n){return e+n}),0)},D=t(46),k=[1,2,3,4];function E(e){if(4!==e.length)throw new Error("simpleDistribution must be of length 4");return{1:e[0],2:e[1],3:e[2],4:e[3]}}function F(e){return[e[1],e[2],e[3],e[4]]}var I={"\u822c":[2,1],"\u4e0a":[4,1],"\u7279":[5,2],"\u9cf3":[6,3]},V={"\u6771":2,"\u5357":3};function P(e){return e<3?"".concat(3-e,"K"):"".concat(e-2,"D")}var C=function(e){return function(n){return e(Object(s.a)(Object(s.a)({},n),{},{distribution:W(n.distribution)}))}};function A(e){return n=e.field,t=e.result,i=e.internalDan,(t<=2?5*I[n][t-1]:4===t?5*-i:0)*V[e.gameType];var n,t,i}function B(e,n){return 0===n[4]?1/0:(I[e][0]*n[1]+I[e][1]*n[2])/n[4]}var G=function(e){return T(k.map((function(n){return A(Object(s.a)(Object(s.a)({},e),{},{result:n}))*e.distribution[n]})))},M=C(G),S=function(e){return T(k.map((function(n,t){return Math.pow(A(Object(s.a)(Object(s.a)({},e),{},{result:n})),2)*e.distribution[n]})))},z=C(S);var J=[{init:0,up:100,down:-100},{init:0,up:100,down:-100},{init:0,up:100,down:-100},{init:200,up:400,down:0},{init:400,up:800,down:0},{init:600,up:1200,down:0},{init:800,up:1600,down:0},{init:1e3,up:2e3,down:0},{init:1200,up:2400,down:0},{init:1400,up:2800,down:0},{init:1600,up:3200,down:0},{init:1800,up:3600,down:0},{init:2e3,up:4e3,down:0}];J.map((function(e,n){return n}));var L=C((function(e){for(var n=J[e.internalDan],t=(n.up-n.down)/5,i=Object(D.eye)(t),r=function(n){k.forEach((function(r){var a=n+A(Object(s.a)(Object(s.a)({},e),{},{result:r}))/5;0<=a&&a<t&&i.set(n,a,i.get(n,a)-e.distribution[r])}))},a=0;a<t;a++)r(a);return i.transpose()})),N=C((function(e){for(var n=J[e.internalDan],t=(n.up-n.down)/5,i=Object(D.zeros)(t,1),r=function(n){k.forEach((function(r){var a=n+A(Object(s.a)(Object(s.a)({},e),{},{result:r}))/5;(a<0||t<=a)&&0<A(Object(s.a)(Object(s.a)({},e),{},{result:r}))&&i.set(n,0,i.get(n,0)-e.distribution[r])}))},a=0;a<t;a++)r(a);return Array.from(L(e).solve(i).data.map((function(e){return-e})))}));C((function(e){var n=N(e);return Array.from(L(e).solve(new D.NDArray(n.map((function(e){return[e]})))).data.map((function(e,t){return e/n[t]})))}));C((function(e){var n=N(e).map((function(e){return 1-e}));return Array.from(L(e).solve(new D.NDArray(n.map((function(e){return[e]})))).data.map((function(e,t){return e/n[t]})))}));function W(e){var n=T(F(e));return{1:e[1]/n,2:e[2]/n,3:e[3]/n,4:e[4]/n}}var K=function e(n){Object(g.a)(this,e),this.kind="independent",this.maxInternalDan=13,this.distributions=void 0,this.distributions=n},q=new K(E([2500,2500,2500,2500])),H=function(){function e(n){Object(g.a)(this,e),this.kind="array",this.maxInternalDan=void 0,this.distributions=void 0,this.distributions=n}return Object(y.a)(e,[{key:"withDistribution",value:function(n,t){var i=Object(m.a)(this.distributions);return i[n]=t,new e(i)}}]),e}(),Q=function e(n,t){Object(g.a)(this,e),this.distributions=n,this.functionBody=t,this.kind="function",this.maxInternalDan=void 0,this.state="sound"},R=function e(n,t){Object(g.a)(this,e),this.maxInternalDan=n,this.functionBody=t,this.kind="function",this.distributions=[],this.state="broken"};function U(e,n){var t=[];try{t=w(n).map((function(n){return E(new Function("dan",e)(n))}))}catch(i){return new R(n,e)}return new Q(t,e)}var X=t(145),Y=t(220),Z=t(222),$=t(221),_=t(223),ee=t(224),ne=t(216);function te(e){var n=Object(i.jsx)(ne.a,{size:"1em"}),t=Object(r.useState)(n),a=Object(j.a)(t,2),c=a[0],u=a[1],s=e.f,o=e.args;return Object(r.useEffect)((function(){var e=!0;return s(o).then((function(n){e&&u(Object(i.jsx)(i.Fragment,{children:n}))})),function(){e=!1,u(n)}}),[s,o]),Object(i.jsx)(i.Fragment,{children:c})}var ie=new function(){return new Worker(t.p+"static/js/tenhou.worker.8d26eaad.js")},re=Object(X.a)(ie);function ae(e){return Object(i.jsxs)(Y.a,{size:"small",children:[Object(i.jsx)(ce,{danEfficiency:e.danEfficiency}),Object(i.jsx)($.a,{children:e.distributions.map((function(n,t){return Object(i.jsx)(ue,{danEfficiency:e.danEfficiency,field:e.field,distribution:n,internalDan:t,gameType:e.gameType},t)})).reverse()})]})}function ce(e){return Object(i.jsx)(Z.a,{children:Object(i.jsxs)(_.a,{children:[Object(i.jsx)(ee.a,{children:"@"}),e.danEfficiency?Object(i.jsx)(ee.a,{children:"DE"}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)(ee.a,{children:"adv"}),Object(i.jsx)(ee.a,{children:"dif"}),Object(i.jsx)(ee.a,{children:Object(i.jsx)("a",{href:"https://note.com/chanpukin/n/ne668771fe917#nhceu",children:"Pe"})}),Object(i.jsx)(ee.a,{children:"P\u2191"}),Object(i.jsx)(ee.a,{children:"E\u2191"}),Object(i.jsx)(ee.a,{children:"E\u2193"})]})})}function ue(e){return Object(i.jsxs)(_.a,{children:[Object(i.jsx)(ee.a,{children:P(e.internalDan)}),e.danEfficiency?Object(i.jsx)(ee.a,{children:B(e.field,e.distribution)}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)(ee.a,{children:M(e)}),Object(i.jsx)(ee.a,{children:z(e)}),Object(i.jsx)(ee.a,{children:(n=e,G(n)/S(n))}),Object(i.jsx)(ee.a,{children:Object(i.jsx)(te,{args:e,f:re.promotionProb})}),Object(i.jsx)(ee.a,{children:Object(i.jsx)(te,{args:e,f:re.promotionEG})}),Object(i.jsx)(ee.a,{children:Object(i.jsx)(te,{args:e,f:re.demotionEG})})]});var n}function se(e){var n=function(e){var n=e.slice(0,-1);return n.forEach((function(e,t){t&&(n[t]+=n[t-1])})),[n,n.slice(-1)[0]+e.slice(-1)[0]]}(e.values);return Object(i.jsx)(p.a,{onChange:function(t,i){"number"===typeof i?console.warn("single slider.value"):e.setValues(function(e,n){var t=[].concat(Object(m.a)(e),[n]),i=[0].concat(Object(m.a)(e));return t.map((function(e,n){return e-i[n]}))}(i,n[1]))},value:n[0],min:0,max:n[1]})}function je(e){return Object(i.jsx)(O.a,{container:!0,children:e.values.map((function(n,t){return Object(i.jsx)(O.a,{item:!0,xs:3,children:Object(i.jsx)(v.a,{value:n,onChange:function(n){var i=Object(m.a)(e.values);i[t]=parseFloat(n.target.value),e.setValues(i)}})},t)}))})}function oe(e){var n=T(e.values);return Object(i.jsx)(O.a,{container:!0,children:e.values.map((function(e,t){return Object(i.jsx)(O.a,{item:!0,xs:3,children:Object(i.jsx)(o.a,{children:e/n})},t)}))})}function le(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(t){return Object(i.jsxs)(d.a,{children:[Object(i.jsx)(f.a,{children:n}),Object(i.jsx)(h.a,{onChange:function(e){return t.setValue(e.target.value)},children:e.map((function(e){return Object(i.jsx)(b.a,{control:Object(i.jsx)(x.a,{}),value:e,label:e,checked:e===t.value})}))})]})}}var de=le(["\u9cf3","\u7279","\u4e0a","\u822c"],"Field"),be=le(["slider","text"],"Input Type"),fe=le(["independent","array","function"],"Player Type"),Oe=le(["\u6771","\u5357"],"Game Type");function xe(e){return Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(fe,{value:e.playerType,setValue:e.setPlayerType})}),Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(be,{value:e.inputType,setValue:e.setInputType})}),Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(de,{value:e.field,setValue:e.setField})}),Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(Oe,{value:e.gameType,setValue:e.setGameType})})]})}function he(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(xe,Object(s.a)({playerType:e.player.kind,setPlayerType:function(n){return e.setPlayer(function(e){switch(e){case"independent":return new K(E([2500,2500,2500,2500]));case"array":return new H(w(13).map((function(e){return E([250,250,250,250])})));case"function":return U("return [2500, 2500, 2500, 2500]",13)}}(n))}},e)),Object(i.jsx)(pe,Object(s.a)({},e)),Object(i.jsx)(me,Object(s.a)({},e))]})}function pe(e){var n=e.player;if("independent"===n.kind)return Object(i.jsx)(ge,Object(s.a)({values:F(n.distributions),setValues:function(n){return e.setPlayer(new K(E(n)))}},e));if("array"===n.kind)return Object(i.jsx)(ye,Object(s.a)({values:n.distributions.map(F),setValues:function(t,i){return e.setPlayer(n.withDistribution(i,E(t)))}},e));var t="broken"===n.state?n.maxInternalDan:n.distributions.length;return Object(i.jsx)(ve,Object(s.a)({maxInternalDan:t,setMaxInternalDan:function(t){return e.setPlayer(U(n.functionBody,t))},value:n.functionBody,setValue:function(n){return e.setPlayer(U(n,t))},isError:"broken"===n.state},e))}function ve(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,xs:4,children:Object(i.jsxs)(o.a,{children:["\u6bb5\u4f4d\u4e0a\u9650 (exclusive): ",e.maxInternalDan," (",P(e.maxInternalDan),")"]})}),Object(i.jsx)(O.a,{item:!0,xs:!0,children:Object(i.jsx)(p.a,{min:1,max:23,value:e.maxInternalDan,onChange:function(n,t){"number"===typeof t?e.setMaxInternalDan(t):console.error("multiple maxInternalDan values")}})})]}),Object(i.jsxs)("div",{style:e.isError?{backgroundColor:"#ffeeee"}:{},children:[Object(i.jsx)(o.a,{children:"// dan: \u73fe\u5728\u6bb5\u4f4d (k\u7d1a: 3-k; d\u6bb5: d+2)"}),Object(i.jsx)(o.a,{children:"function distribution(dan: number)"}),Object(i.jsx)(o.a,{children:"{"}),Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,xs:1}),Object(i.jsx)(O.a,{item:!0,xs:!0,children:Object(i.jsx)(v.a,{fullWidth:!0,multiline:!0,margin:"dense",rows:10,rowsMax:20,variant:"filled",value:e.value,onChange:function(n){return e.setValue(n.target.value)}})})]}),Object(i.jsx)(o.a,{children:"}"}),Object(i.jsx)(o.a,{children:"// \u8fd4\u5374\u5024: [1\u4f4d, 2\u4f4d, 3\u4f4d, 4\u4f4d] \u6bd4\u7387 (\u5408\u8a08\u306f\u975e0\u3067\u3042\u308c\u3070\u3088\u3044: \u6b63\u898f\u5316\u306f\u81ea\u52d5)"})]})]})}function me(e){var n=e.player,t="independent"===n.kind?w(n.maxInternalDan).map((function(e){return n.distributions})):n.distributions,r="independent"!==n.kind;return"function"===n.kind&&"broken"===n.state?Object(i.jsx)(o.a,{children:"Error in distribution(dan) function definition"}):Object(i.jsx)(ae,Object(s.a)({distributions:t,danEfficiency:r},e))}function ye(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)(l.a,{variant:"outlined",children:"+"}),e.values.map((function(n,t){return Object(i.jsx)(we,{inputType:e.inputType,internalDan:t,values:n,setValues:function(n){return e.setValues(n,t)}},t)})).reverse()]})}function ge(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(we,{inputType:e.inputType,values:e.values,setValues:e.setValues}),Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,xs:6,children:Object(i.jsxs)(o.a,{children:["DE=",B(e.field,E(e.values))-2]})}),Object(i.jsx)(O.a,{})]})]})}function we(e){var n="slider"===e.inputType?se:je,t="slider"===e.inputType?[8,4]:[6,6];return void 0!==e.internalDan&&(t[1]-=1),Object(i.jsxs)(O.a,{container:!0,justify:"space-around",spacing:1,children:[void 0!==e.internalDan?Object(i.jsx)(O.a,{item:!0,xs:1,children:Object(i.jsx)(o.a,{children:P(e.internalDan)})}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)(O.a,{item:!0,xs:t[0],children:Object(i.jsx)(n,{values:e.values,setValues:e.setValues})}),Object(i.jsx)(O.a,{item:!0,xs:t[1],children:Object(i.jsx)(oe,{values:e.values})})]})}var Te={field:"\u9cf3",inputType:"slider",player:q,gameType:"\u5357"};var De=function(){var e=a.a.useState(Te),n=Object(j.a)(e,2),t=n[0],r=n[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(he,{field:t.field,setField:function(e){return r(Object(s.a)(Object(s.a)({},t),{},{field:e}))},inputType:t.inputType,setInputType:function(e){return r(Object(s.a)(Object(s.a)({},t),{},{inputType:e}))},player:t.player,setPlayer:function(e){return r(Object(s.a)(Object(s.a)({},t),{},{player:e}))},gameType:t.gameType,setGameType:function(e){return r(Object(s.a)(Object(s.a)({},t),{},{gameType:e}))}}),Object(i.jsx)(o.a,{children:Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:"\u5353\u306e\u6607\u964d\u306a\u3057: \u5e38\u306b\u540c\u3058\u5353\u3067 (\u4e03\u6bb5\u672a\u6e80\u3082\u9cf3\u51f0\u5353\u3067, etc) \u6253\u3061\u7d9a\u3051\u308b"}),Object(i.jsx)("li",{children:"3\u7d1a\u20131\u7d1a\u306e\u6607\u964d\u3042\u308a: \u521d\u671f0, \u6607\u6bb5100, \u964d\u6bb5-100 \u3092\u4eee\u5b9a"})]})})]})},ke=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,234)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),i(e),r(e),a(e),c(e)}))};u.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(De,{})}),document.getElementById("root")),ke()}},[[176,1,2]]]);
//# sourceMappingURL=main.4e7f2411.chunk.js.map