(this.webpackJsonptenhoudan=this.webpackJsonptenhoudan||[]).push([[0],{162:function(n,e,t){},163:function(n,e,t){},164:function(n,e){},165:function(n,e){},166:function(n,e){},179:function(n,e,t){"use strict";t.r(e);var i=t(2),r=t(0),a=t.n(r),c=t(14),u=t.n(c),s=(t(162),t(12)),o=t(20),j=t(180),l=(t(163),t(231)),d=t(236),b=t(230),f=t(229),O=t(228),x=t(233),p=t(234),h=t(235),y=t(232),v=t(55),m=t(56),g=t(45),w=t(23);var D=function(n){return n.reduce((function(n,e){return n+e}),0)},F=[1,2,3,4];function T(n){if(4!==n.length)throw new Error("simpleDistribution must be of length 4");return{1:n[0],2:n[1],3:n[2],4:n[3]}}function k(n){return[n[1],n[2],n[3],n[4]]}var E={"\u822c":[2,1],"\u4e0a":[4,1],"\u7279":[5,2],"\u9cf3":[6,3]},I={"\u6771":2,"\u5357":3};function V(n){return n<3?"".concat(3-n,"K"):"".concat(n-2,"D")}var P=function(n){return function(e){return n(Object(s.a)(Object(s.a)({},e),{},{distribution:N(e.distribution)}))}};function C(n){return e=n.field,t=n.result,i=n.internalDan,(t<=2?5*E[e][t-1]:4===t?5*-i:0)*I[n.gameType];var e,t,i}function M(n,e){return 0===e[4]?1/0:(E[n][0]*e[1]+E[n][1]*e[2])/e[4]}var S=function(n){return D(F.map((function(e){return C(Object(s.a)(Object(s.a)({},n),{},{result:e}))*n.distribution[e]})))},A=P(S),G=function(n){return D(F.map((function(e,t){return Math.pow(C(Object(s.a)(Object(s.a)({},n),{},{result:e})),2)*n.distribution[e]})))},_=P(G);var L=[{init:0,up:100,down:-100},{init:0,up:100,down:-100},{init:0,up:100,down:-100},{init:200,up:400,down:0},{init:400,up:800,down:0},{init:600,up:1200,down:0},{init:800,up:1600,down:0},{init:1e3,up:2e3,down:0},{init:1200,up:2400,down:0},{init:1400,up:2800,down:0},{init:1600,up:3200,down:0},{init:1800,up:3600,down:0},{init:2e3,up:4e3,down:0}],z=L.map((function(n,e){return e}));var B=P((function(n){for(var e=L[n.internalDan],t=(e.up-e.down)/5,i=Object(g.eye)(t),r=function(e){F.forEach((function(r){var a=e+C(Object(s.a)(Object(s.a)({},n),{},{result:r}))/5;0<=a&&a<t&&i.set(e,a,i.get(e,a)-n.distribution[r])}))},a=0;a<t;a++)r(a);return i.transpose()})),J=P((function(n){for(var e=L[n.internalDan],t=(e.up-e.down)/5,i=Object(g.zeros)(t,1),r=function(e){F.forEach((function(r){var a=e+C(Object(s.a)(Object(s.a)({},n),{},{result:r}))/5;(a<0||t<=a)&&0<C(Object(s.a)(Object(s.a)({},n),{},{result:r}))&&i.set(e,0,i.get(e,0)-n.distribution[r])}))},a=0;a<t;a++)r(a);return Array.from(B(n).solve(i).data.map((function(n){return-n})))}));P((function(n){var e=J(n);return Array.from(B(n).solve(new g.NDArray(e.map((function(n){return[n]})))).data.map((function(n,t){return n/e[t]})))}));P((function(n){var e=J(n).map((function(n){return 1-n}));return Array.from(B(n).solve(new g.NDArray(e.map((function(n){return[n]})))).data.map((function(n,t){return n/e[t]})))}));function N(n){var e=D(k(n));return{1:n[1]/e,2:n[2]/e,3:n[3]/e,4:n[4]/e}}var W=function(){function n(e){Object(v.a)(this,n),this.kind="independent",this._distribution=void 0,this._distribution=e}return Object(m.a)(n,[{key:"distribution",value:function(){return this._distribution}},{key:"setDistribution",value:function(n){return this._distribution=n,this}}]),n}(),K=new W(T([2500,2500,2500,2500])),q=function(){function n(e){Object(v.a)(this,n),this.kind="array",this.distributions=void 0,this.distributions=e}return Object(m.a)(n,[{key:"distribution",value:function(n){return this.distributions[n]}},{key:"setDistribution",value:function(n,e){return this.distributions[e]=n,this}},{key:"distributionLength",value:function(){return this.distributions.length}}]),n}();function H(n){var e=void 0;try{e=function(e){return T(new Function("dan",n)(e))}}catch(t){console.log(t)}try{void 0!==e&&e(0)}catch(t){console.log(t)}return{distributionFunctionString:n,distributionFunction:e}}var Q=function(){function n(e,t){Object(v.a)(this,n),this.kind="function",this.distributionFunction=void 0,this.maxInternalDan=void 0,this.distributionFunction=e,this.maxInternalDan=t}return Object(m.a)(n,[{key:"setMaxInternalDan",value:function(n){return this.maxInternalDan=n,this}},{key:"setDistributionFunction",value:function(e){return new n(H(e),this.maxInternalDan)}}]),n}();var R=t(147),U=t(223),X=t(225),Y=t(224),Z=t(226),$=t(227),nn=t(62),en=t.n(nn),tn=t(145),rn=t(219);function an(n){var e=Object(r.useState)(Object(i.jsx)(rn.a,{})),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){return function(){var e=Object(tn.a)(en.a.mark((function e(){var t;return en.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.f(n.args);case 2:t=e.sent,c(Object(i.jsx)(i.Fragment,{children:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return c(Object(i.jsx)(rn.a,{}))}}),[n.args]),Object(i.jsx)(i.Fragment,{children:a})}var cn=new function(){return new Worker(t.p+"static/js/tenhou.worker.8d26eaad.js")},un=Object(R.a)(cn);function sn(n){return Object(i.jsxs)(U.a,{size:"small",children:[Object(i.jsx)(on,{danEfficiency:n.danEfficiency}),Object(i.jsx)(Y.a,{children:n.dans.map((function(e,t){return Object(i.jsx)(jn,{danEfficiency:n.danEfficiency,field:n.field,distribution:n.distribution(e),internalDan:e,gameType:n.gameType},t)})).reverse()})]})}function on(n){return Object(i.jsx)(X.a,{children:Object(i.jsxs)(Z.a,{children:[Object(i.jsx)($.a,{children:"@"}),n.danEfficiency?Object(i.jsx)($.a,{children:"DE"}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)($.a,{children:"adv"}),Object(i.jsx)($.a,{children:"dif"}),Object(i.jsx)($.a,{children:Object(i.jsx)("a",{href:"https://note.com/chanpukin/n/ne668771fe917#nhceu",children:"Pe"})}),Object(i.jsx)($.a,{children:"P\u2191"}),Object(i.jsx)($.a,{children:"E\u2191"}),Object(i.jsx)($.a,{children:"E\u2193"})]})})}function jn(n){return Object(i.jsxs)(Z.a,{children:[Object(i.jsx)($.a,{children:V(n.internalDan)}),n.danEfficiency?Object(i.jsx)($.a,{children:M(n.field,n.distribution)}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)($.a,{children:A(n)}),Object(i.jsx)($.a,{children:_(n)}),Object(i.jsx)($.a,{children:(e=n,S(e)/G(e))}),Object(i.jsx)($.a,{children:Object(i.jsx)(an,{args:n,f:un.promotionProb})}),Object(i.jsx)($.a,{children:Object(i.jsx)(an,{args:n,f:un.promotionEG})}),Object(i.jsx)($.a,{children:Object(i.jsx)(an,{args:n,f:un.demotionEG})})]});var e}function ln(n){var e=function(n){var e=n.slice(0,-1);return e.forEach((function(n,t){t&&(e[t]+=e[t-1])})),[e,e.slice(-1)[0]+n.slice(-1)[0]]}(n.values);return Object(i.jsx)(h.a,{onChange:function(t,i){"number"===typeof i?console.warn("single slider.value"):n.setValues(function(n,e){var t=[].concat(Object(w.a)(n),[e]),i=[0].concat(Object(w.a)(n));return t.map((function(n,e){return n-i[e]}))}(i,e[1]))},value:e[0],min:0,max:e[1]})}function dn(n){return Object(i.jsx)(O.a,{container:!0,children:n.values.map((function(e,t){return Object(i.jsx)(O.a,{item:!0,xs:3,children:Object(i.jsx)(y.a,{value:e,onChange:function(e){var i=Object(w.a)(n.values);i[t]=parseFloat(e.target.value),n.setValues(i)}})},t)}))})}function bn(n){var e=D(n.values);return Object(i.jsx)(O.a,{container:!0,children:n.values.map((function(n,t){return Object(i.jsx)(O.a,{item:!0,xs:3,children:Object(i.jsx)(j.a,{children:n/e})},t)}))})}function fn(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(t){return Object(i.jsxs)(d.a,{children:[Object(i.jsx)(f.a,{children:e}),Object(i.jsx)(p.a,{onChange:function(n){return t.setValue(n.target.value)},children:n.map((function(n){return Object(i.jsx)(b.a,{control:Object(i.jsx)(x.a,{}),value:n,label:n,checked:n===t.value})}))})]})}}var On=fn(["\u9cf3","\u7279","\u4e0a","\u822c"],"Field"),xn=fn(["slider","text"],"Input Type"),pn=fn(["independent","array","function"],"Player Type"),hn=fn(["\u6771","\u5357"],"Game Type");function yn(n){return Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(pn,{value:n.playerType,setValue:n.setPlayerType})}),Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(xn,{value:n.inputType,setValue:n.setInputType})}),Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(On,{value:n.field,setValue:n.setField})}),Object(i.jsx)(O.a,{item:!0,children:Object(i.jsx)(hn,{value:n.gameType,setValue:n.setGameType})})]})}function vn(n){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(yn,Object(s.a)({playerType:n.player.kind,setPlayerType:function(e){return n.setPlayer(function(n){switch(n){case"independent":return new W(T([2500,2500,2500,2500]));case"array":return new q([T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250]),T([250,250,250,250])]);case"function":return new Q(H("return [2500, 2500, 2500, 2500]"),13)}}(e))}},n)),Object(i.jsx)(mn,Object(s.a)({},n)),Object(i.jsx)(wn,Object(s.a)({},n))]})}function mn(n){return"independent"===n.player.kind?Object(i.jsx)(Fn,Object(s.a)({values:k(n.player.distribution()),setValues:function(e){return n.setPlayer(n.player.setDistribution(T(e)))}},n)):"array"===n.player.kind?Object(i.jsx)(Dn,Object(s.a)({values:n.player.distributions.map(k),setValues:function(e,t){return n.setPlayer(n.player.setDistribution(T(e),t))}},n)):Object(i.jsx)(gn,Object(s.a)({maxInternalDan:n.player.maxInternalDan,setMaxInternalDan:function(e){return n.setPlayer(n.player.setMaxInternalDan(e))},value:n.player.distributionFunction.distributionFunctionString,setValue:function(e){return n.setPlayer(n.player.setDistributionFunction(e))},isError:void 0===n.player.distributionFunction.distributionFunction},n))}function gn(n){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,xs:4,children:Object(i.jsxs)(j.a,{children:["\u6bb5\u4f4d\u4e0a\u9650 (exclusive): ",n.maxInternalDan," (",V(n.maxInternalDan),")"]})}),Object(i.jsx)(O.a,{item:!0,xs:!0,children:Object(i.jsx)(h.a,{min:1,max:23,value:n.maxInternalDan,onChange:function(e,t){"number"===typeof t?n.setMaxInternalDan(t):console.error("multiple maxInternalDan values")}})})]}),Object(i.jsxs)("div",{style:n.isError?{backgroundColor:"#ffeeee"}:{},children:[Object(i.jsx)(j.a,{children:"// dan: \u73fe\u5728\u6bb5\u4f4d (k\u7d1a: 3-k; d\u6bb5: d+2)"}),Object(i.jsx)(j.a,{children:"function distribution(dan: number)"}),Object(i.jsx)(j.a,{children:"{"}),Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,xs:1}),Object(i.jsx)(O.a,{item:!0,xs:!0,children:Object(i.jsx)(y.a,{fullWidth:!0,multiline:!0,margin:"dense",rows:10,rowsMax:20,variant:"filled",value:n.value,onChange:function(e){return n.setValue(e.target.value)}})})]}),Object(i.jsx)(j.a,{children:"}"}),Object(i.jsx)(j.a,{children:"// \u8fd4\u5374\u5024: [1\u4f4d, 2\u4f4d, 3\u4f4d, 4\u4f4d] \u6bd4\u7387 (\u5408\u8a08\u306f\u975e0\u3067\u3042\u308c\u3070\u3088\u3044: \u6b63\u898f\u5316\u306f\u81ea\u52d5)"})]})]})}function wn(n){var e="independent"===n.player.kind?function(e){return n.player.distribution()}:"array"===n.player.kind?function(e){return n.player.distributions[e]}:function(e){return n.player.distributionFunction.distributionFunction(e)},t="array"===n.player.kind?n.player.distributions.map((function(n,e){return e})):z,r="independent"!==n.player.kind;return"function"===n.player.kind&&void 0===n.player.distributionFunction.distributionFunction?Object(i.jsx)(j.a,{children:"Error in distribution(dan) function definition"}):Object(i.jsx)(sn,Object(s.a)({distribution:e,dans:t,danEfficiency:r},n))}function Dn(n){return Object(i.jsxs)("div",{children:[Object(i.jsx)(l.a,{variant:"outlined",children:"+"}),n.values.map((function(e,t){return Object(i.jsx)(Tn,{inputType:n.inputType,internalDan:t,values:e,setValues:function(e){return n.setValues(e,t)}},t)})).reverse()]})}function Fn(n){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Tn,{inputType:n.inputType,values:n.values,setValues:n.setValues}),Object(i.jsxs)(O.a,{container:!0,children:[Object(i.jsx)(O.a,{item:!0,xs:6,children:Object(i.jsxs)(j.a,{children:["DE=",M(n.field,T(n.values))-2]})}),Object(i.jsx)(O.a,{})]})]})}function Tn(n){var e="slider"===n.inputType?ln:dn,t="slider"===n.inputType?[8,4]:[6,6];return void 0!==n.internalDan&&(t[1]-=1),Object(i.jsxs)(O.a,{container:!0,justify:"space-around",spacing:1,children:[void 0!==n.internalDan?Object(i.jsx)(O.a,{item:!0,xs:1,children:Object(i.jsx)(j.a,{children:V(n.internalDan)})}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)(O.a,{item:!0,xs:t[0],children:Object(i.jsx)(e,{values:n.values,setValues:n.setValues})}),Object(i.jsx)(O.a,{item:!0,xs:t[1],children:Object(i.jsx)(bn,{values:n.values})})]})}var kn={field:"\u9cf3",inputType:"slider",player:K,gameType:"\u5357"};var En=function(){var n=a.a.useState(kn),e=Object(o.a)(n,2),t=e[0],r=e[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(vn,{field:t.field,setField:function(n){return r(Object(s.a)(Object(s.a)({},t),{},{field:n}))},inputType:t.inputType,setInputType:function(n){return r(Object(s.a)(Object(s.a)({},t),{},{inputType:n}))},player:t.player,setPlayer:function(n){return r(Object(s.a)(Object(s.a)({},t),{},{player:n}))},gameType:t.gameType,setGameType:function(n){return r(Object(s.a)(Object(s.a)({},t),{},{gameType:n}))}}),Object(i.jsx)(j.a,{children:Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:"\u5353\u306e\u6607\u964d\u306a\u3057: \u5e38\u306b\u540c\u3058\u5353\u3067 (\u4e03\u6bb5\u672a\u6e80\u3082\u9cf3\u51f0\u5353\u3067, etc) \u6253\u3061\u7d9a\u3051\u308b"}),Object(i.jsx)("li",{children:"3\u7d1a\u20131\u7d1a\u306e\u6607\u964d\u3042\u308a: \u521d\u671f0, \u6607\u6bb5100, \u964d\u6bb5-100 \u3092\u4eee\u5b9a"})]})})]})},In=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,237)).then((function(e){var t=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;t(n),i(n),r(n),a(n),c(n)}))};u.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(En,{})}),document.getElementById("root")),In()}},[[179,1,2]]]);
//# sourceMappingURL=main.31ef253a.chunk.js.map